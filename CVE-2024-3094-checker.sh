#!/bin/bash

# Detect package manager
if type -P apt-get >/dev/null 2>&1; then
    PKG_MANAGER="apt-get"
    version=$(dpkg -l | grep "xz-utils" | awk '{print $3}' | sed 's/-.*//')
elif type -P yum >/dev/null 2>&1; then
    PKG_MANAGER="yum"
    version=$(yum list installed | grep "xz" | awk '{print $2}' | sed 's/-.*1//g')
elif type -P zypper >/dev/null 2>&1; then
    PKG_MANAGER="zypper"
    version=$(zypper info xz | awk '/Version/' | awk '{print $3}' | sed 's/-.*//')
elif type -P pacman >/dev/null 2>&1; then
    PKG_MANAGER="pacman"
    version=$(pacman -Qi xz | awk '/Version/' | awk '{print $3}' | sed 's/-.*//')
else
    echo "Unsupported package manager. Exiting."
    exit 1
fi

echo "Found version $version"
